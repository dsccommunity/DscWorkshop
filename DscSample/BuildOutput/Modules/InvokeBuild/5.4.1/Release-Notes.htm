<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Release-Notes</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="invoke-build-release-notes">Invoke-Build Release Notes</h1>
<h2 id="v541">v5.4.1</h2>
<p>Add help for <code>Set-BuildHeader</code>, <code>Set-BuildFooter</code>.</p>
<h2 id="v540">v5.4.0</h2>
<ul>
<li>Add <code>Set-BuildFooter</code> in addition to <code>Set-BuildHeader</code>, #125</li>
<li>Update the sample <code>Tasks/Header</code>, use custom footers, too.</li>
<li>Tweak <code>remove</code> for more useful error location info.</li>
</ul>
<h2 id="v530">v5.3.0</h2>
<p>Add the robust helper <code>remove</code>, the alternative to <code>Remove-Item</code>, see <a href="https://github.com/nightroman/Invoke-Build/issues/123">#123</a></p>
<p>Tools</p>
<ul>
<li><em>New-VSCodeTask.ps1</em> 1.1.6 - Confirm removal of not generated file.</li>
</ul>
<h2 id="v521">v5.2.1</h2>
<ul>
<li>New switch <code>Latest</code> of <code>Resolve-MSBuild</code>, #122</li>
</ul>
<h2 id="v520">v5.2.0</h2>
<ul>
<li><strong>New:</strong> Alternative syntax of task parameters, kind of inline splatting, <a href="https://github.com/nightroman/Invoke-Build/issues/119">#119</a></li>
<li>Add &quot;missing output&quot; message to incremental task processing, <a href="https://github.com/nightroman/Invoke-Build/issues/120">#120</a></li>
</ul>
<p>Tools</p>
<ul>
<li><em>Invoke-TaskFromVSCode.ps1</em> should save the file on invoking, <a href="https://github.com/nightroman/Invoke-Build/issues/118">#118</a></li>
<li>Improve <em>Invoke-TaskFromVSCode.ps1</em> error info in some cases</li>
<li>Support <code>viz.js</code> in <em>Show-BuildGraph.ps1</em></li>
</ul>
<h2 id="v511">v5.1.1</h2>
<ul>
<li><code>Show-TaskHelp</code> - switches are shown after other parameters.</li>
<li>Optimized calls of <code>Show-TaskHelp</code> from <code>Invoke-Build</code>.</li>
</ul>
<h2 id="v510">v5.1.0</h2>
<p>New internal tool, <a href="https://github.com/nightroman/Invoke-Build/issues/117">#117</a></p>
<ul>
<li>The new tool <em>Show-TaskHelp.ps1</em> is included to packages.</li>
<li><code>Invoke-Build ... -WhatIf</code> uses the new <code>Show-TaskHelp</code>.</li>
</ul>
<p>New external tool, <a href="https://github.com/nightroman/Invoke-Build/issues/116">#116</a></p>
<ul>
<li><em>Show-BuildDgml.ps1</em> generates build graphs as DGML for Visual Studio.</li>
</ul>
<h2 id="v501">v5.0.1</h2>
<p>Tidy up some check failure errors, #115</p>
<p>Convert <code>FormatTaskName</code> by <code>Convert-psake</code>, #114</p>
<h2 id="v500">v5.0.0</h2>
<p>Allow empty lines between synopsis comments and tasks, #111.</p>
<p>Remove actions on dot-sourcing, #112.</p>
<p>Retire obsolete features:</p>
<ul>
<li><code>(job TaskName -Safe)</code> - instead, use <code>?TaskName</code>, see #105.</li>
<li><code>use VisualStudio</code> - not used much, not designed for VS 2017</li>
</ul>
<h2 id="v420">v4.2.0</h2>
<p>Preserve attributes of build script parameters, #109.</p>
<p>Amend exit codes on <code>-Safe</code> in cmd: 1 on argument errors, 0 otherwise.</p>
<h2 id="v412">v4.1.2</h2>
<p>Add ability to use MSBuild from Visual Studio Preview, #107.</p>
<p>Avoid trailing <code>\r</code> in task synopses extracted from block comments.</p>
<p>Amend the role of <code>Done</code> in custom tasks. It is always called and works as <code>finally</code> for a task. Handlers check for <code>$Task.Error</code> if it matters.</p>
<h2 id="v411">v4.1.1</h2>
<p>Improve <code>Result</code> on invalid arguments</p>
<ul>
<li>Ensure <code>Result</code>'s variable or hashtable <code>Value</code> entry is always created.</li>
<li>Fail with a proper error if <code>Result</code> is not a string or hashtable.</li>
<li>On invalid calls ensure at least a surrogate result <code>Error</code>.</li>
</ul>
<p>Amend <code>Build-Parallel</code></p>
<ul>
<li>Better errors on invalid builds parameters.</li>
<li>Do not count incomplete build results.</li>
</ul>
<p>Tidy up help.</p>
<h2 id="v410">v4.1.0</h2>
<ul>
<li>Improve syntax and usability of safe references. #105
<ul>
<li>Introduce <code>?TaskName</code> instead of deprecated <code>(job TaskName -Safe)</code>.</li>
<li>Support <code>?TaskName</code> in the parameter <code>-Task</code> of <code>Invoke-Build</code>.</li>
</ul></li>
<li>Redesign error output.
<ul>
<li>Improve for VSCode, AppVeyor, and redirection. #106</li>
<li>If a task fails in <code>If</code>, add it to the list of invoked tasks.</li>
</ul></li>
</ul>
<h2 id="v402">v4.0.2</h2>
<p><code>Build-Checkpoint</code> should fail if not supported <code>WhatIf</code> is specified.</p>
<h2 id="v401">v4.0.1</h2>
<ul>
<li>Support colored output in AppVeyor, <a href="https://github.com/nightroman/Invoke-Build/issues/103">#103</a>.</li>
<li>Deprecate <code>use VisualStudio</code>.</li>
</ul>
<h2 id="v400">v4.0.0</h2>
<p>New command <code>Build-Checkpoint</code> replaces <code>Invoke-Build -Checkpoint</code>. If you use persistent builds then change the command and parameters, see #101.</p>
<p>New command <code>Build-Parallel</code> replaces <code>Invoke-Builds</code> (mind &quot;s&quot;). If you use parallel builds then simply rename the command, see #100.</p>
<h2 id="v372">v3.7.2</h2>
<p>Normalize, test, and make <code>$BuildRoot</code> constant after loading tasks (#95).</p>
<h2 id="v371">v3.7.1</h2>
<p><em>Invoke-Builds</em> (parallel builds)</p>
<ul>
<li>Add <code>FailHard</code>, it tells to abort builds if any build fails.</li>
<li>Redesign the script without using runspace pools.</li>
<li>Avoid some duplicated info in output.</li>
</ul>
<h2 id="v370">v3.7.0</h2>
<p>Package the module files together with scripts. As a result, the script package may be used as the module, too. This change does not affect the module package.</p>
<p>Retire <code>Get-BuildVersion</code>. Use <code>(Get-Module InvokeBuild).Version</code> instead. In theory, this change is breaking but it seems the function was not used. The standard module version is used from now on.</p>
<h2 id="v365">v3.6.5</h2>
<p>Fix resuming of persistent builds after failures in task <code>-If</code> (#90).</p>
<h2 id="v364">v3.6.4</h2>
<p>Support version suffix x86 in <code>use</code> and <code>Resolve-MSBuild</code> (#85).</p>
<h2 id="v363">v3.6.3</h2>
<p>Resolve MSBuild 15 to ../amd64/MSBuild.exe on x64 (#84).</p>
<h2 id="v362">v3.6.2</h2>
<p>Warn about always skipped double references (#82).</p>
<h2 id="v361">v3.6.1</h2>
<ul>
<li>Fix #80, lost <code>Task</code> in the collected errors.</li>
<li>Fix potential PS v6-beta.3 issues in <em>ib.cmd</em>.</li>
</ul>
<h2 id="v360">v3.6.0</h2>
<p>Support script block as <code>File</code> (#78).</p>
<h2 id="v353">v3.5.3</h2>
<p>Improved product selection logic in <code>Resolve-MSBuild</code> (#77). If you use the module <code>VSSetup</code> make sure it is not too old. It should support <code>-Product *</code>.</p>
<h2 id="v352">v3.5.2</h2>
<ul>
<li>Avoid some <code>property</code> limitations (#75).</li>
<li>Use <code>&amp;</code> in <code>exec</code>, it looks safer.</li>
<li>Tweak help.</li>
</ul>
<h2 id="v351">v3.5.1</h2>
<ul>
<li>Remove redundant information from safe errors.</li>
<li>Remove retired &quot;Parameters&quot; from reserved.</li>
</ul>
<h2 id="v350">v3.5.0</h2>
<ul>
<li>New block <code>Set-BuildHeader</code> for writing custom task headers.</li>
<li>New function <code>Get-BuildSynopsis</code>, e.g. for <code>Set-BuildHeader</code>.</li>
</ul>
<p>See <em>repo/Tasks/Header</em> for examples of <code>Set-BuildHeader</code> and <code>Get-BuildSynopsis</code>.</p>
<h2 id="v340">v3.4.0</h2>
<p>New command <code>requires</code>, the alias of <code>Test-BuildAsset</code> (#73).</p>
<h2 id="v3311">v3.3.11</h2>
<p>Rework engine variables to reduce noise on debugging (#72).</p>
<h2 id="v3310">v3.3.10</h2>
<ul>
<li>Add exported aliases to .psd1, work around #71.</li>
<li>Fix leaked variable on dot-sourcing Invoke-Build.</li>
</ul>
<h2 id="v339">v3.3.9</h2>
<p>Fix incremental tasks on Mono (#69).</p>
<h2 id="v338">v3.3.8</h2>
<ul>
<li>Write messages about redefined tasks, resolve #68.</li>
<li>Fix unexpected output on some debugging cases.</li>
</ul>
<h2 id="v337">v3.3.7</h2>
<p>Improve errors on tasks check failures (#67).</p>
<h2 id="v336">v3.3.6</h2>
<p>Retire obsolete events defined as functions, see #66.</p>
<h2 id="v335">v3.3.5</h2>
<p>Use less cryptic names for internal functions (#63).</p>
<h2 id="v334">v3.3.4</h2>
<p>Adjust <code>property</code> behaviour to PowerShell and MSBuild (#60):</p>
<ul>
<li>get the session variable value if it is not $null or ''</li>
<li>get the environment value if it is not $null or ''</li>
<li>get the specified default if it is not $null</li>
<li>throw an error</li>
</ul>
<h2 id="v333">v3.3.3</h2>
<p><code>Resolve-MSBuild</code> supports the <em>BuildTools</em> installation (#57).</p>
<h2 id="v332">v3.3.2</h2>
<p>Improve info on typical mistakes:</p>
<ul>
<li>missing comma in job lists</li>
<li>unexpected build output</li>
<li>dangling script blocks</li>
</ul>
<h2 id="v331">v3.3.1</h2>
<p>Improve errors on invalid script syntax (#56).</p>
<h2 id="v330">v3.3.0</h2>
<p>New <em>Resolve-MSBuild.ps1</em> for finding MSBuild 2.0-15.0, specified or the latest. It may be used directly. Build scripts use it via the alias <code>Resolve-MSBuild</code>. NuGet and PSGallery packages include this script.</p>
<p>The old way <code>use &lt;version&gt; MSBuild</code> is supported and works with all versions. But the new script is used internally, <em>Invoke-Build.ps1</em> alone is not enough.</p>
<h2 id="v324">v3.2.4</h2>
<p>Fix #54, <code>exec</code> should use <code>$global:LastExitCode</code>.</p>
<h2 id="v323">v3.2.3</h2>
<p>Use <code>exit /B</code> in <em>ib.cmd</em> (#52).</p>
<h2 id="v322">v3.2.2</h2>
<ul>
<li>Incremental tasks print some more info (#49)</li>
<li>Outputs block receives piped Inputs (#50)</li>
</ul>
<h2 id="v321">v3.2.1</h2>
<p>Module help tweaks.</p>
<h2 id="v320">v3.2.0</h2>
<p><code>use</code>: The conventional path <code>VisualStudio\&lt;version&gt;</code> is resolved via the registry to the Visual Studio tools directory (<code>devenv</code>, <code>mstest</code>, <code>tf</code>).</p>
<h2 id="v310">v3.1.0</h2>
<p>Event blocks instead of functions, see #36.</p>
<h2 id="v302">v3.0.2</h2>
<p>Use <code>exit 0</code> on success (#34).</p>
<h2 id="v301">v3.0.1</h2>
<p>Invoke-Build is cross-platform with PowerShell v6.0.0-alpha.</p>
<h2 id="v300">v3.0.0</h2>
<p>Build script parameters are specified as Invoke-Build dynamic parameters. The parameter <code>Parameters</code> was removed. This change is breaking in some cases, see <a href="https://github.com/nightroman/Invoke-Build/issues/29">#29</a>.</p>
<p>Avoided cryptic errors on invoking scripts with invalid syntax and on resuming builds with an invalid checkpoint file.</p>
<h2 id="v2-releases">v2 releases</h2>
<p>Previous release notes: <a href="https://github.com/nightroman/Invoke-Build/wiki/V2-Release-Notes">V2 Release Notes</a></p>
</body>
</html>
